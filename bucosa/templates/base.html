{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <script src="{% static 'theme-toggle.js' %}"></script>
    <script src="{% static 'pwa-install.js' %}"></script>
    <script src="{% static 'notifications.js' %}"></script>
    <script src="{% static 'firebase-push.js' %}"></script>
     <script src="{% static 'script-custom.js' %}"></script>
    <!-- Bootstrap JS (bundle includes Popper) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Use compat versions for Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-messaging-compat.js"></script>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="manifest" href="{% static 'manifest.json' %}">
    <meta name="theme-color" content="#22223b">
    {% block extra_head %}{% endblock %}
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('{% static "service-worker.js" %}');
          navigator.serviceWorker.register('{% static "firebase-messaging-sw.js" %}');
        });
      }
    </script>
</head>
<body class="bg-white min-h-screen transition-colors duration-300 text-black" id="body-root">
    <!-- PWA Install Button -->
    <button id="pwa-install-btn" style="display:none;position:fixed;bottom:24px;right:24px;z-index:1000;background:#1976d2;color:#fff;padding:12px 24px;border:none;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.2);font-size:16px;cursor:pointer;">Install Bucosa App</button>
      <nav id="mainNav">
        <ul class="nav nav-pills nav-links-container">
            <li class="nav-item">
                <a class="nav-link" href="{% url 'activities:home'  %}"  data-link-id="list"><i class="fas fa-list-alt"></i></a>
            
            <li class="nav-item">
                <a class="nav-link" href="{% url 'users:search_users' %}"  data-link-id="seedling"><i class="fas fa-seedling"></i></a>
            </li>
            <li class="nav-item">
                <a class="nav-link toggle-button" href="#" id="toggleLeaf"><i class="fas fa-leaf"></i></a> <!-- This is the toggle button -->
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'users:profile' user.id %}" data-link-id="bookmark"><i class="fas fa-bookmark"></i></a>
            </li>
            <li id="notification-bell-sidebar" style="position:relative;">
                  <div class="flex items-center gap-3 px-3 py-3 rounded-full hover:bg-gray-900 transition text-white font-semibold text-lg w-full cursor-pointer" id="notificationDropdown">
                    <span class="material-icons">notifications</span>
                    <span class="hidden md:inline">Notifications</span>
                    <span id="notification-badge" style="display:none;position:absolute;top:10px;right:10px;background:red;color:white;border-radius:50%;padding:2px 6px;font-size:12px;">0</span>
                  </div>
                  <div id="notification-dropdown" style="display:none;position:absolute;left:60px;top:0;background:#fff;border:1px solid #ccc;width:300px;max-height:400px;overflow-y:auto;z-index:1000;"></div>
            </li>
            <!-- Hidden links - these will appear when the leaf icon is clicked on mobile -->
            <li class="nav-item hidden-mobile-link">
                <a class="nav-link" href="{% url 'users:private_messages' %}" data-link-id="home"><i class="fas fa-home"></i></a>
            </li>
            <li class="nav-item hidden-mobile-link">
                <a class="nav-link" href="{% url 'bucosa_main' %}" data-link-id="user"><i class="fas fa-user"></i></a>
            </li>
            <li class="nav-item hidden-mobile-link">
                <a class="nav-link" href="{% url 'fellowship_detail' 1 %}" data-link-id="info"><i class="fas fa-info-circle"></i></a>
            </li>

             <li class="nav-item">
                <a class="nav-link" href="{% url 'users:logout' %}" data-link-id="cog"><i class="fas fa-cog"></i></a>
            </li>
        </ul>
    </nav>
</body>
</html>