{% extends "base.html" %}
{% block content %}
<h2>Create Live Stream</h2>
<form method="post">
    {% csrf_token %}
    <label>Title:</label>
    <input type="text" name="title" required><br>

    <label>Description:</label>
    <textarea name="description"></textarea><br>

    <label>Start Time:</label>
    <input type="datetime-local" name="start_time" required><br>

    <label>Invite Users:</label>
    <select name="invited_users" multiple>
        {% for user in users %}
        <option value="{{ user.id }}">{{ user.email }}</option>
        {% endfor %}
    </select><br>

    <button type="submit">Create Live Stream</button>
</form>

{% if youtube_live_url %}
<div class="mt-4">
    <p>âœ… Live stream link:</p>
    <input type="text" value="{{ youtube_live_url }}" id="liveLink" readonly style="width:80%;">
    <button onclick="copyLink()">Copy Link</button>
</div>

<script>
function copyLink() {
    const copyText = document.getElementById("liveLink");
    copyText.select();
    copyText.setSelectionRange(0, 99999);
    navigator.clipboard.writeText(copyText.value);
    alert("Copied the link: " + copyText.value);
}
</script>
{% endif %}
{% endblock %}
