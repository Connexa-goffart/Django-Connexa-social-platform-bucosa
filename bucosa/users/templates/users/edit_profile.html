{% extends 'base.html' %}
{% load static %}
{% block content %}
<div class="min-h-screen bg-gray-50">
  <!-- App Header -->
  <header class="bg-indigo-600 text-white p-4 shadow-md">
    <div class="flex items-center">
      <button onclick="history.back()" class="mr-3">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
        </svg>
      </button>
      <h1 class="text-xl font-bold">Create Profile</h1>
    </div>
  </header>

  <!-- Form Content -->
  <div class="p-5" style="padding-bottom: 100px;">
    <form method="post" enctype="multipart/form-data" class="space-y-5" id="profile-form">
      {% csrf_token %}
      {{ form.non_field_errors }}
      
      {% for field in form %}
        {% if field.name != 'user_type' and field.name != 'username' %}
        <div class="space-y-2">
          <label class="block font-medium text-gray-700 text-sm">{{ field.label_tag }}</label>
          
          {% if field.field.widget.input_type == 'textarea' %}
            <textarea 
              name="{{ field.name }}" 
              id="{{ field.id_for_label }}" 
              class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white"
              rows="4"
              {% if field.field.required %}required{% endif %}
              placeholder="Enter {{ field.label|lower }}"
            >{% if field.value %}{{ field.value }}{% endif %}</textarea>
          {% elif field.field.widget.input_type == 'file' %}
            <div class="relative">
              <input 
                type="file" 
                name="{{ field.name }}" 
                id="{{ field.id_for_label }}" 
                class="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                {% if field.field.required %}required{% endif %}
                accept="image/*"
              >
              <div class="p-3 border border-gray-300 rounded-lg bg-white flex items-center justify-between">
                <span class="text-gray-500">Choose file</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13" />
                </svg>
              </div>
            </div>
          {% else %}
            <input 
              type="{{ field.field.widget.input_type }}" 
              name="{{ field.name }}" 
              id="{{ field.id_for_label }}" 
              value="{% if field.value %}{{ field.value }}{% endif %}"
              class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white"
              {% if field.field.required %}required{% endif %}
              placeholder="Enter {{ field.label|lower }}"
            >
          {% endif %}
          
          {% if field.help_text %}
            <p class="text-xs text-gray-500 mt-1">{{ field.help_text }}</p>
          {% endif %}
          {% for error in field.errors %}
            <p class="text-xs text-red-500 mt-1 font-medium">{{ error }}</p>
          {% endfor %}
        </div>
        {% endif %}
      {% endfor %}
    </form>
  </div>


</div>
<script>
// Ensure button is always visible and functional
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('profile-form');
  const buttonContainer = document.querySelector('.fixed');
  const submitBtn = buttonContainer.querySelector('button');
  
  // Force visibility
  if (buttonContainer) {
    buttonContainer.style.display = 'block';
    buttonContainer.style.visibility = 'visible';
    buttonContainer.style.position = 'fixed';
    buttonContainer.style.bottom = '0';
    buttonContainer.style.left = '0';
    buttonContainer.style.right = '0';
    buttonContainer.style.zIndex = '9999';
  }
  
  // Ensure form submission works
  if (submitBtn && form) {
    submitBtn.addEventListener('click', function(e) {
      e.preventDefault();
      form.submit();
    });
  }
});
</script>
{% endblock %}